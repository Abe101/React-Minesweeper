(this.webpackJsonpminesweeperr=this.webpackJsonpminesweeperr||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(6),r=n.n(o),l=(n(13),n(7)),i=n(1),c=n(2),u=n(4),f=n(3),p=function(e){return function(){if(e.data.isOpen){if(e.data.hasMine){return s.a.createElement("div",{className:"cell bomb",onContextMenu:function(e){e.preventDefault()},onClick:function(){return e.open(e.data)}},s.a.createElement("span",null,"\ud83d\udca3"))}return 0===e.data.count?s.a.createElement("div",{className:"cell open",onContextMenu:function(t){t.preventDefault(),e.flag(e.data)},onClick:function(){return e.open(e.data)}}):s.a.createElement("div",{className:"cell open",onContextMenu:function(e){e.preventDefault()},onClick:function(){return e.open(e.data)}},e.data.count)}if(e.data.hasFlag){return s.a.createElement("div",{className:"cell open-flag",onContextMenu:function(t){t.preventDefault(),e.flag(e.data)},onClick:function(){return e.open(e.data)}},s.a.createElement("span",null,"\ud83d\udea9"))}return s.a.createElement("div",{className:"cell",onContextMenu:function(t){t.preventDefault(),e.flag(e.data)},onClick:function(){return e.open(e.data)}})}()},m=function(e){var t=e.cells.map((function(t,n){return s.a.createElement(p,{key:n,data:t,open:e.open,flag:e.flag})}));return s.a.createElement("div",{className:"row"},t)},h=function(e){Object(u.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).createBoard=function(e){for(var t=[],n=0;n<e.rows;n++){t.push([]);for(var a=0;a<e.columns;a++)t[n].push({x:a,y:n,count:10,isOpen:!1,hasMine:!1,hasFlag:!1})}for(var s=0;s<e.mines;s++){var o=Math.floor(Math.random()*e.rows),r=Math.floor(Math.random()*e.columns),l=t[o][r];l.hasMine?s--:l.hasMine=!0}return t},a.open=function(e){"ended"!==a.props.status&&new Promise((function(t){t(a.findMines(e))})).then((function(t){console.log(t);var n=a.state.rows,s=n[e.y][e.x];if(s.hasMine&&0===a.props.openCells){console.log("cell already has mine");var o=a.createBoard(a.props);a.setState({rows:o},(function(){a.open(e)}))}else e.hasFlag||s.isOpen||(a.props.openCellClick(),s.isOpen=!0,s.count=t,console.log(s),a.setState({rows:n}),s.hasMine||0!==t||a.findAroundCell(e),s.hasMine&&0!==a.props.openCells&&(a.props.endGame(),alert("you lose")))}))},a.flag=function(e){if("ended"!==a.props.status&&!e.isOpen){var t=a.state.rows;e.hasFlag=!e.hasFlag,a.setState({rows:t}),a.props.changeFlagAmount(e.hasFlag?-1:1)}},a.findMines=function(e){for(var t=0,n=-1;n<=1;n++)for(var s=-1;s<=1;s++)e.y+n>=0&&e.x+s>=0&&e.y+n<a.state.rows.length&&e.x+s<a.state.rows[0].length&&(!a.state.rows[e.y+n][e.x+s].hasMine||0===n&&0===s||t++);return t},a.findAroundCell=function(e){for(var t=a.state.rows,n=-1;n<=1;n++)for(var s=-1;s<=1;s++)e.y+n>=0&&e.x+s>=0&&e.y+n<a.state.rows.length&&e.x+s<a.state.rows[0].length&&(a.state.rows[e.y+n][e.x+s].hasMine||a.state.rows[e.y+n][e.x+s].isOpen||a.open(t[e.y+n][e.x+s]))},a.state={rows:a.createBoard(e)},a}return Object(c.a)(n,[{key:"componentWillReceiveProps",value:function(e){(this.props.openCells>e.openCells||this.props.columns!==e.columns)&&this.setState({rows:this.createBoard(e)})}},{key:"render",value:function(){var e=this,t=this.state.rows.map((function(t,n){return s.a.createElement(m,{cells:t,key:n,open:e.open,flag:e.flag})}));return s.a.createElement("div",{className:"board"},t)}}]),n}(a.Component),d=function(e){var t=Math.floor(e.time/60),n=e.time-60*t||0,a=n<10?"0".concat(n):n,o="".concat(t,":").concat(a);return s.a.createElement("div",{className:"board-head"},s.a.createElement("div",{className:"flag-count"},e.flagCount),s.a.createElement("button",{className:"reset",onClick:e.reset},"Reset"),s.a.createElement("div",{className:"timer"},o))},v=function(e){Object(u.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).endGame=function(){a.setState({status:"ended"})},a.checkForWinner=function(){a.state.mines+a.state.openCells>=a.state.rows*a.state.columns&&a.setState({status:"winner"},alert("ggwp"))},a.reset=function(){a.intervals.map(clearInterval),a.setState(Object(l.a)({},a.baseState),(function(){a.intervals=[]}))},a.tick=function(){if(a.state.openCells>0&&"running"===a.state.status){var e=a.state.time+1;a.setState({time:e})}},a.setInterval=function(e,t){a.intervals.push(setInterval(e,t))},a.handleCellClicked=function(){0===a.state.openCells&&"running"!==a.state.status&&a.setState({status:"running"},(function(){a.setInterval(a.tick,1e3)})),a.setState((function(e){return{openCells:e.openCells+1}}))},a.changeFlagAmount=function(e){a.setState({flags:a.state.flags+e})},a.state={status:"waiting",rows:10,columns:10,flags:10,mines:10,openCells:0,time:0},a.baseState=a.state,a}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(e,t){"running"===this.state.status&&this.checkForWinner()}},{key:"componentWillMount",value:function(){this.intervals=[]}},{key:"render",value:function(){return s.a.createElement("div",{className:"minesweeper"},s.a.createElement("h1",null,"Minesweeper"),s.a.createElement(d,{reset:this.reset,time:this.state.time,flagCount:this.state.flags}),s.a.createElement(h,{status:this.state.status,changeFlagAmount:this.changeFlagAmount,endGame:this.endGame,rows:this.state.rows,columns:this.state.columns,mines:this.state.mines,openCells:this.state.openCells,openCellClick:this.handleCellClicked}))}}]),n}(s.a.Component);r.a.render(s.a.createElement(v,null),document.getElementById("root"))},8:function(e,t,n){e.exports=n(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.97e58192.chunk.js.map